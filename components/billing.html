<!-- ENHANCED BILLING COMPONENT WITH INVOICE GENERATION -->
<section id="billing" class="hidden p-4">
  <div class="content-header">
    <div>
      <h2><i class="pi pi-credit-card"></i> Billing & Invoice Management</h2>
      <p style="color: var(--gray-600); margin: 0;">Create professional invoices with company details, QR codes, and comprehensive billing features</p>
    </div>
    <div class="actions">
      <button class="btn btn-primary" onclick="openCreateInvoiceModal()">
        <i class="pi pi-plus"></i> Create Invoice
      </button>
      <button class="btn btn-success" onclick="openCreateQuotationModal()">
        <i class="pi pi-file-edit"></i> Create Quotation
      </button>
      <button class="btn btn-info" onclick="openCompanySettingsModal()">
        <i class="pi pi-cog"></i> Company Settings
      </button>
      <button class="btn btn-secondary" onclick="backToDashboard()">
        <i class="pi pi-arrow-left"></i> Back
      </button>
    </div>
  </div>

  <div class="stats-grid">
    <div class="stat-card">
      <div class="stat-value" id="billingTotalRevenue">₹0</div>
      <div class="stat-label">Total Revenue</div>
    </div>
    <div class="stat-card">
      <div class="stat-value" id="billingPendingPayments">₹0</div>
      <div class="stat-label">Pending Payments</div>
    </div>
    <div class="stat-card">
      <div class="stat-value" id="billingInvoicesGenerated">0</div>
      <div class="stat-label">Invoices Generated</div>
    </div>
    <div class="stat-card">
      <div class="stat-value" id="billingOverduePayments">0</div>
      <div class="stat-label">Overdue Payments</div>
    </div>
    <div class="stat-card">
      <div class="stat-value" id="billingRecurringCount">0</div>
      <div class="stat-label">Recurring Bills</div>
    </div>
    <div class="stat-card">
      <div class="stat-value" id="billingQuotationsCount">0</div>
      <div class="stat-label">Active Quotations</div>
    </div>
  </div>

  <div class="filters">
    <div class="filter-group">
      <label>Payment Status</label>
      <select id="billingStatusFilter" onchange="applyBillingFilters()">
        <option value="">All Invoices</option>
        <option value="Paid">Paid</option>
        <option value="Unpaid">Unpaid</option>
        <option value="Overdue">Overdue</option>
        <option value="Partial">Partial</option>
        <option value="Cancelled">Cancelled</option>
      </select>
    </div>
    <div class="filter-group">
      <label>Invoice Type</label>
      <select id="billingTypeFilter" onchange="applyBillingFilters()">
        <option value="">All Types</option>
        <option value="Standard">Standard</option>
        <option value="Recurring">Recurring</option>
        <option value="Template">From Template</option>
      </select>
    </div>
    <div class="filter-group">
      <label>Date Range (From)</label>
      <input type="date" id="billingDateStart" onchange="applyBillingFilters()" />
    </div>
    <div class="filter-group">
      <label>Date Range (To)</label>
      <input type="date" id="billingDateEnd" onchange="applyBillingFilters()" />
    </div>
    <div class="filter-group">
      <label>Search Invoices</label>
      <input type="text" id="searchBillingInvoices" placeholder="Invoice #, customer, or amount..." oninput="applyBillingFilters()" />
    </div>
    <div class="filter-group">
      <label>Sort By</label>
      <select id="sortBillingInvoices" onchange="applyBillingFilters()">
        <option value="date-desc">Date (Newest First)</option>
        <option value="date-asc">Date (Oldest First)</option>
        <option value="amount-desc">Amount (Highest First)</option>
        <option value="amount-asc">Amount (Lowest First)</option>
        <option value="customer">Customer Name</option>
        <option value="status">Status</option>
      </select>
    </div>
  </div>

  <div class="table-container">
    <table>
      <thead>
        <tr>
          <th>Invoice #</th>
          <th>Type</th>
          <th>Customer</th>
          <th>Amount</th>
          <th>Issue Date</th>
          <th>Due Date</th>
          <th>Status</th>
          <th>Payment Method</th>
          <th>Actions</th>
        </tr>
      </thead>
      <tbody id="billingTbody"></tbody>
    </table>
  </div>
</section>
